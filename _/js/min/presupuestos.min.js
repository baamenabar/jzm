"use strict";function onPlayerReady(e){e.target.playVideo()}Number.prototype.formatMoney=function(e,t,n){var r=this,e=isNaN(e=Math.abs(e))?2:e,t=t==undefined?",":t,n=n==undefined?".":n,i=r<0?"-":"",s=parseInt(r=Math.abs(+r||0).toFixed(e))+"",o=(o=s.length)>3?o%3:0;return i+(o?s.substr(0,o)+n:"")+s.substr(o).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?t+Math.abs(r-s).toFixed(e).slice(2):"")};var Path={version:"0.8.4",map:function(e){if(Path.routes.defined.hasOwnProperty(e)){return Path.routes.defined[e]}else{return new Path.core.route(e)}},root:function(e){Path.routes.root=e},rescue:function(e){Path.routes.rescue=e},history:{initial:{},pushState:function(e,t,n){if(Path.history.supported){if(Path.dispatch(n)){history.pushState(e,t,n)}}else{if(Path.history.fallback){window.location.hash="#"+n}}},popState:function(e){var t=!Path.history.initial.popped&&location.href==Path.history.initial.URL;Path.history.initial.popped=true;if(t)return;Path.dispatch(document.location.pathname)},listen:function(e){Path.history.supported=!!(window.history&&window.history.pushState);Path.history.fallback=e;if(Path.history.supported){Path.history.initial.popped="state"in window.history,Path.history.initial.URL=location.href;window.onpopstate=Path.history.popState}else{if(Path.history.fallback){for(route in Path.routes.defined){if(route.charAt(0)!="#"){Path.routes.defined["#"+route]=Path.routes.defined[route];Path.routes.defined["#"+route].path="#"+route}}Path.listen()}}}},match:function(e,t){var n={},r=null,i,s,o,u,a;for(r in Path.routes.defined){if(r!==null&&r!==undefined){r=Path.routes.defined[r];i=r.partition();for(u=0;u<i.length;u++){s=i[u];a=e;if(s.search(/:/)>0){for(o=0;o<s.split("/").length;o++){if(o<a.split("/").length&&s.split("/")[o].charAt(0)===":"){n[s.split("/")[o].replace(/:/,"")]=a.split("/")[o];a=a.replace(a.split("/")[o],s.split("/")[o])}}}if(s===a){if(t){r.params=n}return r}}}}return null},dispatch:function(e){var t,n;if(Path.routes.current!==e){Path.routes.previous=Path.routes.current;Path.routes.current=e;n=Path.match(e,true);if(Path.routes.previous){t=Path.match(Path.routes.previous);if(t!==null&&t.do_exit!==null){t.do_exit()}}if(n!==null){n.run();return true}else{if(Path.routes.rescue!==null){Path.routes.rescue()}}}},listen:function(){var e=function(){Path.dispatch(location.hash)};if(location.hash===""){if(Path.routes.root!==null){location.hash=Path.routes.root}}if("onhashchange"in window&&(!document.documentMode||document.documentMode>=8)){window.onhashchange=e}else{setInterval(e,50)}if(location.hash!==""){Path.dispatch(location.hash)}},core:{route:function(e){this.path=e;this.action=null;this.do_enter=[];this.do_exit=null;this.params={};Path.routes.defined[e]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};Path.core.route.prototype={to:function(e){this.action=e;return this},enter:function(e){if(e instanceof Array){this.do_enter=this.do_enter.concat(e)}else{this.do_enter.push(e)}return this},exit:function(e){this.do_exit=e;return this},partition:function(){var e=[],t=[],n=/\(([^}]+?)\)/g,r,i;while(r=n.exec(this.path)){e.push(r[1])}t.push(this.path.split("(")[0]);for(i=0;i<e.length;i++){t.push(t[t.length-1]+e[i])}return t},run:function(){var e=false,t,n,r;if(Path.routes.defined[this.path].hasOwnProperty("do_enter")){if(Path.routes.defined[this.path].do_enter.length>0){for(t=0;t<Path.routes.defined[this.path].do_enter.length;t++){n=Path.routes.defined[this.path].do_enter[t]();if(n===false){e=true;break}}}}if(!e){Path.routes.defined[this.path].action()}}};var presupuesto={datosFiesta:{slideActual:0,valor:0,tipoFiesta:"",personas:0},slides:{fiesta_graduacion:[1,2,15,11,12,13,16,14,9,10,17],fiesta_sub20:[1,2,15,13,16,14,9,10,17],fiesta_matrimonio:[1,2,3,4,5,6,7,8,9,10,17],fiesta_cumpleanos:[1,2,15,11,12,13,16,14,9,10,17],fiesta_evento:[1,2,3,4,5,6,7,8,9,10,17]},minimos:{fiesta_graduacion:2e5,fiesta_sub20:2e5,fiesta_matrimonio:3e5,fiesta_cumpleanos:2e5,fiesta_evento:2e5},maxPersonas:{fiesta_graduacion:400,fiesta_sub20:400,fiesta_matrimonio:1e3,fiesta_cumpleanos:400,fiesta_evento:1e3},historiaSlides:[1],items:[],mensaje_3:"",rangos:[],enviado:false,alerta:false,init:function(){presupuesto_1.init()},cambiarSlide:function(e){var t=this,n=this.datosFiesta.tipoFiesta;if(n!==""){var r=this.slides[n][this.datosFiesta.slideActual];if(e!==r){if(typeof window["presupuesto_"+r].exit==="function"){window["presupuesto_"+r].exit()}$("#presupuesto_"+r).fadeOut("slow",function(){$("#presupuesto_"+e).fadeIn("slow");t.initSlide(e)})}this.datosFiesta.slideActual=$.inArray(e,this.slides[n]);if($("#presupuesto_"+e+" div.presupuesto-navegacion").css("display")!="none"){this.mostrarNavegacion()}}},initSlide:function(e){window["presupuesto_"+e].init()},mostrarNavegacion:function(){this.rangos=[];var e=this,t=this.datosFiesta.tipoFiesta,n=this.datosFiesta.slideActual,r="#presupuesto_"+this.slides[t][n]+" div.presupuesto-navegacion";$(r+" .volver a").off("click").on("click",function(){presupuesto.modal("<p>Perderás todos los datos ingresados. ¿Estás seguro que deseas volver a empezar?.</p><button>Sí</button> <button>No</button>");$("#modal").find("button:eq(0)").one("click",function(){$.magnificPopup.close();e.cambiarSlide(1);e.reset();document.location.hash="/presupuesto/"+1});$("#modal").find("button:eq(1)").one("click",function(){$.magnificPopup.close();presupuesto.mostrarNavegacion()})});$(r+" button").off("click").one("click",function(r){r.preventDefault();document.location.hash="/presupuesto/"+e.slides[t][n+1]});r="#presupuesto_"+this.slides[t][n]+" div.anterior";$(r+" button").off("click").one("click",function(r){r.preventDefault();document.location.hash="/presupuesto/"+e.slides[t][n-1]});$("#presupuesto_"+this.slides[t][n]+" div.presupuesto-navegacion").fadeIn("slow")},ocultarNavegacion:function(e){e=typeof e!=="undefined"?e:false;if(!e){var t=this.datosFiesta.tipoFiesta,n=this.datosFiesta.slideActual;$("#presupuesto_"+this.slides[t][n]+" div.presupuesto-navegacion").hide()}else{$("#presupuesto_"+e+" div.presupuesto-navegacion").hide()}},encontrarRango:function(){var e=this.datosFiesta.tipoFiesta,t=this.datosFiesta.slideActual,n=this.datosFiesta.personas;if(this.rangos.length===0){var r=this;$("#presupuesto_"+this.slides[e][t]+" .rango").each(function(){r.rangos.push($(this).attr("data-rango"))})}for(var i=0;i<this.rangos.length;i++){var s=this.rangos[i].split("-");if(n>=parseInt(s[0],10)&&n<=parseInt(s[1],10)){return this.rangos[i]}}return false},agregarItem:function(e,t){t=t||false;var n={},r=this.datosFiesta.tipoFiesta,i=this.slides[r][this.datosFiesta.slideActual];n.cantidad=$("#presupuesto_"+i+' .rango[data-rango="'+e+'"] span[data-cantidad]').html();n.item=$("#presupuesto_"+i+' .rango[data-rango="'+e+'"] span[data-item]').html();n.precio=$("#presupuesto_"+i+' .rango[data-rango="'+e+'"] span[data-precio]').html();if(this.items[i]instanceof Array){if(t){this.items[i][this.items[i].length-1]=n}else{this.items[i].push(n)}}else{this.items[i]=[n]}},modal:function(e){$.magnificPopup.open({items:{src:'<div id="modal" class="modal">'+e+"</div>",type:"inline"},closeBtnInside:true})},reset:function(e){e=e||false;presupuesto.items=[];presupuesto.historiaSlides=[];if(!e){presupuesto_2.reset()}presupuesto_3.reset();presupuesto_4.reset();presupuesto_5.reset();presupuesto_6.reset();presupuesto_7.reset();presupuesto_8.reset();presupuesto_9.reset();presupuesto_11.reset();presupuesto_12.reset();presupuesto_13.reset();presupuesto_14.reset();presupuesto_15.reset();presupuesto_16.reset()}};var presupuesto_1={init:function(){var e=this;this.removerSeleccionado();$(".tipo-fiesta").each(function(){$(this).off("click").one("click",function(t){t.preventDefault();$(".tipo-fiesta").each(function(){$(this).off("click")});var n=$(this).attr("id"),r=presupuesto.datosFiesta.slideActual;presupuesto.datosFiesta.tipoFiesta=n;var i=$("#"+presupuesto.datosFiesta.tipoFiesta+" h3[data-evento]").html();$(".tipo-fiesta-seleccionada").text(i);e.marcarSeleccionado(i);e.alerta();document.location.hash="/presupuesto/"+presupuesto.slides[n][r+1];presupuesto.reset()})})},marcarSeleccionado:function(e){$("#principal").find(".itm-presupuestos ul > li").each(function(){if($(this).text()===e){$(this).addClass("seleccionado")}else{$(this).removeClass("seleccionado")}})},removerSeleccionado:function(){$("#principal").find(".itm-presupuestos ul > li").removeClass("seleccionado")},alerta:function(){if(!presupuesto.alerta){presupuesto.modal("<p>Ten en consideración que este es un presupuesto referencial, los precios no son definitivos y se pueden ajustar en la medida que no afecten la calidad del evento.</p><button>Aceptar</button>");$("#modal").find("button:eq(0)").one("click",function(){$.magnificPopup.close();$("#cantidad-personas").focus()});$(window).unbind("keypress").bind("keypress",function(e){if(e.which==13){$.magnificPopup.close();$("#cantidad-personas").focus()}});presupuesto.alerta=true}}};var presupuesto_2={items:[],init:function(){var e=this,t=0,n=presupuesto.maxPersonas[presupuesto.datosFiesta.tipoFiesta];$("#cantidad-personas").focus();$("#boton_calcular").off("click").on("click",function(){var e=$("#cantidad-personas").val();presupuesto.datosFiesta.personas=e;if(e!=t){$("#presupuesto_2 .rango").slideUp();$("#presupuesto_2_resultado").slideUp();presupuesto.ocultarNavegacion();if(e>0&&e<=n){var r=presupuesto.encontrarRango(),i=$('#presupuesto_2 .rango[data-rango="'+r+'"] span[data-item]').html();var s=$('#presupuesto_2 .rango[data-rango="'+r+'"]');if(presupuesto.datosFiesta.tipoFiesta==="fiesta_graduacion"){var o=$(s).find("span[data-precio-graduacion]").text(),u=$(s).find("span[data-precio]").text();$(s).find("span[data-precio-graduacion]").text(u);$(s).find("span[data-precio]").text(o)}else{var u=$(s).find("span[data-precio-graduacion]").text(),o=$(s).find("span[data-precio]").text();$(s).find("span[data-precio-graduacion]").text(o);$(s).find("span[data-precio]").text(u)}$("#presupuesto_2_resultado span[data-personas]").html(e);$("#presupuesto_2_resultado span[data-item-resultado]").html(i);$("#presupuesto_2_resultado").slideDown("slow");$('#presupuesto_2 .rango[data-rango="'+r+'"]').slideDown("slow");presupuesto.reset(true);presupuesto.mostrarNavegacion();presupuesto.agregarItem(r,true)}else{if(e>n&&e!==""){presupuesto.modal("<p>Para este tipo de eventos, nuestro formulario está desarrollado para fiestas de hasta "+n+" personas. Si estás planeando realizar un evento con más de "+n+' invitados, puedes utilizar nuestro <a href="contacto">formulario de contacto</a> para poder entregarte un presupuesto más especializado.</p><button>Ir al formulario</button>');$("#modal").find("button:eq(0)").one("click",function(){document.location.href="contacto"})}}}t=e});if(presupuesto.datosFiesta.tipoFiesta=="fiesta_matrimonio"){$("#presupuesto_2_matrimonio").show()}$("#cantidad-personas").unbind("keypress").bind("keypress",function(e){if(e.which==13){e.stopPropagation();$("#boton_calcular").click()}})},reset:function(){$("#cantidad-personas").val("");$("#presupuesto_2_resultado").hide();$("#presupuesto_2 .rango").hide();presupuesto.ocultarNavegacion("2")}};var presupuesto_3={items:[],init:function(){var e=this;$("#presupuesto_3 [data-si]").off("click").on("click",function(){e.opcionSi(this);var t=this;$("#presupuesto_3 [data-si]").each(function(){if(this!==t){$(this).fadeTo("slow",.3)}else{$(this).fadeTo("slow",1)}});$("#presupuesto_3 [data-no]").fadeTo("slow",.3);presupuesto.mensaje_3=$.trim($(this).text())});$("#presupuesto_3 [data-no]").off("click").on("click",function(){e.opcionNo();var t=this;$("#presupuesto_3 [data-no]").each(function(){if(this!==t){$(this).fadeTo("slow",.3)}else{$(this).fadeTo("slow",1)}});$("#presupuesto_3 [data-si]").fadeTo("slow",.3);presupuesto.mensaje_3=$.trim($(this).text())})},opcionSi:function(){$("#presupuesto_3_opcion_no").slideUp();$("#presupuesto_3_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_3 .rango[data-rango="'+e+'"]').slideDown();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_3_opcion_si").slideUp();$("#presupuesto_3 .rango").slideUp();$("#presupuesto_3_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_3 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_3 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_3_opcion_no").hide();$("#presupuesto_3_opcion_si").hide();$("#presupuesto_3 .rango").hide();presupuesto.ocultarNavegacion("3")}};var presupuesto_4={init:function(){var e=this;$("#presupuesto_4 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_4 [data-si]").fadeTo("slow",1);$("#presupuesto_4 [data-no]").fadeTo("slow",.3)});$("#presupuesto_4 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_4 [data-no]").fadeTo("slow",1);$("#presupuesto_4 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){$("#presupuesto_4_opcion_no").slideUp();$("#presupuesto_4_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_4 .rango[data-rango="'+e+'"]').slideDown();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_4_opcion_si").slideUp();$("#presupuesto_4 .rango").slideUp();$("#presupuesto_4_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_4 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_4 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_4_opcion_no").hide();$("#presupuesto_4_opcion_si").hide();$("#presupuesto_4 .rango").hide();presupuesto.ocultarNavegacion("4")}};var presupuesto_5={init:function(){var e=this;$("#presupuesto_5 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_5 [data-si]").fadeTo("slow",1);$("#presupuesto_5 [data-no]").fadeTo("slow",.3)});$("#presupuesto_5 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_5 [data-no]").fadeTo("slow",1);$("#presupuesto_5 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){$("#presupuesto_5_opcion_no").slideUp();$("#presupuesto_5_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_5 .rango[data-rango="'+e+'"]').slideDown();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_5_opcion_si").slideUp();$("#presupuesto_5 .rango").slideUp();$("#presupuesto_5_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_5 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_5 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_5_opcion_no").hide();$("#presupuesto_5_opcion_si").hide();$("#presupuesto_5 .rango").hide();presupuesto.ocultarNavegacion("5")}};var presupuesto_6={init:function(){var e=this;$("#presupuesto_6 .grupo").each(function(){e.cargarDatos(this)});$("#presupuesto_6 .grupo-seleccionar").off("click").on("click",function(){e.seleccionar(this);e.agregarItem(this)});$("#presupuesto_6 a[data-siguiente]").off("click").on("click",function(){$("#presupuesto_6 div.siguiente").find("button").click()});presupuesto.mostrarNavegacion()},cargarDatos:function(e){var t=this,n=this.encontrarRangos(e),r=presupuesto.encontrarRango(n),i=$(e).find('.rango[data-rango="'+r+'"] span[data-precio]').html(),s=$(e).find('.rango[data-rango="'+r+'"] span[data-equipos]').html();$(e).find("[data-precio]").html(i);$(e).find("[data-equipos]").html(s);this.cargarFondo($(e).find("figure"));$(e).find("figure").off("click").on("click",function(){t.cargarVideo(this)})},cargarVideo:function(e){var t=$(e).data("video");$(e).html('<iframe id="'+t+'" width="240" height="210" src="//www.youtube.com/embed/'+t+"?rel=0&controls=0&enablejsapi=1&origin=http://"+document.domain+'" frameborder="0" allowfullscreen></iframe>');var n=new YT.Player(t,{events:{onReady:function(){n.playVideo();n.mute()}}})},cargarFondo:function(e){var t=$(e).data("bg");$(e).css("background","url(imgs/presupuestos/"+t+") no-repeat top center")},seleccionar:function(e){if($(e).hasClass("seleccionado")){$(e).removeClass("seleccionado");$(e).find("button").text("Seleccionar");$("#presupuesto_6 .grupo").fadeTo("slow",1)}else{$(e).closest(".grupo").fadeTo("slow",1);$("#presupuesto_6 .grupo-seleccionar").each(function(){if(e!=this){$(this).closest(".grupo").fadeTo("slow",.3);$(this).removeClass("seleccionado");$(this).find("button").html("Seleccionar")}else{$(this).addClass("seleccionado");$(this).find("button").html("Seleccionado")}})}},encontrarRangos:function(e){presupuesto.rangos=[];$(e).find(".rango").each(function(){presupuesto.rangos.push($(this).attr("data-rango"))})},agregarItem:function(e){var t=1,n=$(e).siblings("p[data-equipos]").html(),r=$(e).siblings("p[data-precio]").html(),i={};i.cantidad=t;i.item=n;i.precio=r;var s=presupuesto.datosFiesta.tipoFiesta,o=presupuesto.slides[s][presupuesto.datosFiesta.slideActual];if(presupuesto.items[o]instanceof Array){presupuesto.items.splice(6,1)}else{presupuesto.items[o]=[i]}},removerVideos:function(){$("#presupuesto_6").find("iframe").remove();$("#presupuesto_6").find("figure").html("&#9658;")},exit:function(){this.removerVideos()},reset:function(){$("#presupuesto_6 .grupo").css("opacity",1);$("#presupuesto_6 .grupo-seleccionar").removeClass("seleccionado").html("<button>Seleccionar</button>");presupuesto.ocultarNavegacion("6")}};var presupuesto_7={init:function(){var e=this;$("#presupuesto_7 .grupo").each(function(){e.cargarDatos(this)});$("#presupuesto_7 .grupo-seleccionar").off("click").on("click",function(){e.seleccionar(this);e.agregarItem(this)});$("#presupuesto_7 a[data-siguiente]").off("click").on("click",function(){$("#presupuesto_7 div.siguiente").find("button").click()});presupuesto.mostrarNavegacion()},cargarDatos:function(e){var t=this,n=presupuesto.encontrarRango(this.encontrarRangos(e)),r=$(e).find('.rango[data-rango="'+n+'"] span[data-precio]').html(),i=$(e).find('.rango[data-rango="'+n+'"] span[data-equipos]').html();$(e).find("[data-precio]").html(r);$(e).find("[data-equipos]").html(i);this.cargarFondo($(e).find("figure"));$(e).find("figure").off("click").on("click",function(){t.cargarVideo(this)})},cargarVideo:function(e){if(!$(e).hasClass("no-video")){var t=$(e).data("video");$(e).html('<iframe id="'+t+'" width="240" height="210" src="//www.youtube.com/embed/'+t+"?rel=0&controls=0&enablejsapi=1&origin=http://"+document.domain+'" frameborder="0" allowfullscreen></iframe>');var n=new YT.Player(t,{events:{onReady:function(){n.playVideo();n.mute()}}})}},cargarFondo:function(e){var t=$(e).data("bg");$(e).css("background","url(imgs/presupuestos/"+t+") no-repeat top center")},seleccionar:function(e){if($(e).hasClass("seleccionado")){$(e).removeClass("seleccionado");$(e).html("<button>Seleccionar</button>")}else{$(e).addClass("seleccionado");$(e).html("<button>Seleccionado</button>")}},encontrarRangos:function(e){presupuesto.rangos=[];$(e).find(".rango").each(function(){presupuesto.rangos.push($(this).attr("data-rango"))})},agregarItem:function(e){var t=$(e).hasClass("seleccionado"),n=1,r=$(e).siblings("p[data-equipos]").html(),i=$(e).siblings("p[data-precio]").html(),s={};s.cantidad=n;s.item=r;s.precio=i;var o=presupuesto.datosFiesta.tipoFiesta,u=presupuesto.slides[o][presupuesto.datosFiesta.slideActual],a=false;if(presupuesto.items[u]instanceof Array){for(var f=0;f<presupuesto.items[u].length;f++){var l=presupuesto.items[u][f];if(l.item===s.item&&!t){presupuesto.items[u].splice(f,1);a=true;break}else if(l.item===s.item){a=true;break}}if(presupuesto.items[u].length===0){presupuesto.items.splice(7,1)}else{if(!a){presupuesto.items[u].push(s)}}}else{presupuesto.items[u]=[s]}},removerVideos:function(){$("#presupuesto_7").find("iframe").remove();$("#presupuesto_7").find("figure").html("&#9658;")},exit:function(){this.removerVideos()},reset:function(){$("#presupuesto_7 .grupo-seleccionar").removeClass("seleccionado").html("<button>Seleccionar</button>");presupuesto.ocultarNavegacion("7")}};var presupuesto_8={init:function(){var e=this;$("#presupuesto_8 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_8 [data-si]").fadeTo("slow",1);$("#presupuesto_8 [data-no]").fadeTo("slow",.3)});$("#presupuesto_8 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_8 [data-no]").fadeTo("slow",1);$("#presupuesto_8 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){$("#presupuesto_8_opcion_no").slideUp();$("#presupuesto_8_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_8 .rango[data-rango="'+e+'"]').slideDown();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_8_opcion_si").slideUp();$("#presupuesto_8 .rango").slideUp();$("#presupuesto_8_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_8 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_8 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_8_opcion_no").hide();$("#presupuesto_8_opcion_si").hide();$("#presupuesto_8 .rango").hide();presupuesto.ocultarNavegacion("8")}};var presupuesto_9={init:function(){var e=this;$("#presupuesto_9 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_9 [data-si]").fadeTo("slow",1);$("#presupuesto_9 [data-no]").fadeTo("slow",.3)});$("#presupuesto_9 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_9 [data-no]").fadeTo("slow",1);$("#presupuesto_9 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){var e=presupuesto.encontrarRango();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_9 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_9 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_9_opcion_no").hide();$("#presupuesto_9_opcion_si").hide();$("#presupuesto_9 .rango").hide();presupuesto.ocultarNavegacion("8")}};var presupuesto_10={init:function(){var e=this;$("#presupuesto_10 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_10 [data-si]").fadeTo("slow",1);$("#presupuesto_10 [data-no]").fadeTo("slow",.3)});$("#presupuesto_10 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_10 [data-no]").fadeTo("slow",1);$("#presupuesto_10 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){var e=presupuesto.encontrarRango();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_10 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_10 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_10_opcion_no").hide();$("#presupuesto_10_opcion_si").hide();$("#presupuesto_10 .rango").hide();presupuesto.ocultarNavegacion("10")}};var presupuesto_11={init:function(){var e=this;$("#presupuesto_11 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_11 [data-si]").fadeTo("slow",1);$("#presupuesto_11 [data-no]").fadeTo("slow",.3)});$("#presupuesto_11 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_11 [data-no]").fadeTo("slow",1);$("#presupuesto_11 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){$("#presupuesto_11_opcion_no").slideUp();$("#presupuesto_11_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_11 .rango[data-rango="'+e+'"]').slideDown();var t=$('#presupuesto_11 .rango[data-rango="'+e+'"]');if(presupuesto.datosFiesta.tipoFiesta==="fiesta_graduacion"){var n=$(t).find("span[data-precio-graduacion]").text(),r=$(t).find("span[data-precio]").text();$(t).find("span[data-precio-graduacion]").text(r);$(t).find("span[data-precio]").text(n)}else{var r=$(t).find("span[data-precio-graduacion]").text(),n=$(t).find("span[data-precio]").text();$(t).find("span[data-precio-graduacion]").text(n);$(t).find("span[data-precio]").text(r)}presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_11_opcion_si").slideUp();$("#presupuesto_11 .rango").slideUp();$("#presupuesto_11_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_11 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_11 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_11_opcion_no").hide();$("#presupuesto_11_opcion_si").hide();$("#presupuesto_11 .rango").hide();presupuesto.ocultarNavegacion("11")}};var presupuesto_12={items:[],init:function(){var e=this;$("#presupuesto_12 [data-si]").off("click").on("click",function(){e.opcionSi(this);var t=this;$("#presupuesto_12 [data-si]").each(function(){if(this!==t){$(this).fadeTo("slow",.3)}else{$(this).fadeTo("slow",1)}});$("#presupuesto_12 [data-no]").fadeTo("slow",.3);presupuesto.mensaje_3=$.trim($(this).text())});$("#presupuesto_12 [data-no]").off("click").on("click",function(){e.opcionNo();var t=this;$("#presupuesto_12 [data-no]").each(function(){if(this!==t){$(this).fadeTo("slow",.3)}else{$(this).fadeTo("slow",1)}});$("#presupuesto_12 [data-si]").fadeTo("slow",.3);presupuesto.mensaje_3=$.trim($(this).text())})},opcionSi:function(){$("#presupuesto_12_opcion_no").slideUp();$("#presupuesto_12_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_12 .rango[data-rango="'+e+'"]').slideDown();presupuesto.mostrarNavegacion();var t=$('#presupuesto_12 .rango[data-rango="'+e+'"]');if(presupuesto.datosFiesta.tipoFiesta==="fiesta_graduacion"){var n=$(t).find("span[data-precio-graduacion]").text(),r=$(t).find("span[data-precio]").text();$(t).find("span[data-precio-graduacion]").text(r);$(t).find("span[data-precio]").text(n)}else{var r=$(t).find("span[data-precio-graduacion]").text(),n=$(t).find("span[data-precio]").text();$(t).find("span[data-precio-graduacion]").text(n);$(t).find("span[data-precio]").text(r)}presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_12_opcion_si").slideUp();$("#presupuesto_12 .rango").slideUp();$("#presupuesto_12_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_12 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_12 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_12_opcion_no").hide();$("#presupuesto_12_opcion_si").hide();$("#presupuesto_12 .rango").hide();presupuesto.ocultarNavegacion("12")}};var presupuesto_13={init:function(){var e=this;$("#presupuesto_13 .grupo").each(function(){e.cargarDatos(this)});$("#presupuesto_13 .grupo-seleccionar").off("click").on("click",function(){e.seleccionar(this);e.agregarItem(this)});$("#presupuesto_13 a[data-siguiente]").off("click").on("click",function(){$("#presupuesto_13 div.siguiente").find("button").click()});presupuesto.mostrarNavegacion()},cargarDatos:function(e){var t=this,n=this.encontrarRangos(e),r=presupuesto.encontrarRango(n),i=$(e).find('.rango[data-rango="'+r+'"] span[data-precio]').html(),s=$(e).find('.rango[data-rango="'+r+'"] span[data-equipos]').html();$(e).find("[data-precio]").html(i);$(e).find("[data-equipos]").html(s);this.cargarFondo($(e).find("figure"));$(e).find("figure").off("click").on("click",function(){t.cargarVideo(this)})},cargarVideo:function(e){var t=$(e).data("video");$(e).html('<iframe id="'+t+'" width="240" height="210" src="//www.youtube.com/embed/'+t+"?rel=0&controls=0&enablejsapi=1&origin=http://"+document.domain+'" frameborder="0" allowfullscreen></iframe>');var n=new YT.Player(t,{events:{onReady:function(){n.playVideo();n.mute()}}})},cargarFondo:function(e){var t=$(e).data("bg");$(e).css("background","url(imgs/presupuestos/"+t+") no-repeat top center")},seleccionar:function(e){if($(e).hasClass("seleccionado")){$(e).removeClass("seleccionado");$(e).find("button").text("Seleccionar");$("#presupuesto_13 .grupo").fadeTo("slow",1)}else{$(e).closest(".grupo").fadeTo("slow",1);$("#presupuesto_13 .grupo-seleccionar").each(function(){if(e!=this){$(this).closest(".grupo").fadeTo("slow",.3);$(this).removeClass("seleccionado");$(this).find("button").html("Seleccionar")}else{$(this).addClass("seleccionado");$(this).find("button").html("Seleccionado")}})}},encontrarRangos:function(e){presupuesto.rangos=[];$(e).find(".rango").each(function(){presupuesto.rangos.push($(this).attr("data-rango"))})},agregarItem:function(e){var t=1,n=$(e).siblings("p[data-equipos]").html(),r=$(e).siblings("p[data-precio]").html(),i={};i.cantidad=t;i.item=n;i.precio=r;var s=presupuesto.datosFiesta.tipoFiesta,o=presupuesto.slides[s][presupuesto.datosFiesta.slideActual];if(presupuesto.items[o]instanceof Array){presupuesto.items.splice(6,1)}else{presupuesto.items[o]=[i]}},removerVideos:function(){$("#presupuesto_13").find("iframe").remove();$("#presupuesto_13").find("figure").html("&#9658;")},exit:function(){this.removerVideos()},reset:function(){$("#presupuesto_13 .grupo").css("opacity",1);$("#presupuesto_13 .grupo-seleccionar").removeClass("seleccionado").html("<button>Seleccionar</button>");presupuesto.ocultarNavegacion("13")}};var presupuesto_14={init:function(){var e=this;$("#presupuesto_14 .grupo").each(function(){e.cargarDatos(this)});$("#presupuesto_14 .grupo-seleccionar").off("click").on("click",function(){e.seleccionar(this);e.agregarItem(this)});$("#presupuesto_14 a[data-siguiente]").off("click").on("click",function(){$("#presupuesto_14 div.siguiente").find("button").click()});presupuesto.mostrarNavegacion()},cargarDatos:function(e){var t=this,n=presupuesto.encontrarRango(this.encontrarRangos(e)),r=$(e).find('.rango[data-rango="'+n+'"] span[data-precio]').html(),i=$(e).find('.rango[data-rango="'+n+'"] span[data-equipos]').html();$(e).find("[data-precio]").html(r);$(e).find("[data-equipos]").html(i);this.cargarFondo($(e).find("figure"));$(e).find("figure").off("click").on("click",function(){t.cargarVideo(this)})},cargarVideo:function(e){if(!$(e).hasClass("no-video")){var t=$(e).data("video");$(e).html('<iframe id="'+t+'" width="240" height="210" src="//www.youtube.com/embed/'+t+"?rel=0&controls=0&enablejsapi=1&origin=http://"+document.domain+'" frameborder="0" allowfullscreen></iframe>');var n=new YT.Player(t,{events:{onReady:function(){n.playVideo();n.mute()}}})}},cargarFondo:function(e){var t=$(e).data("bg");$(e).css("background","url(imgs/presupuestos/"+t+") no-repeat top center")},seleccionar:function(e){if($(e).hasClass("seleccionado")){$(e).removeClass("seleccionado");$(e).html("<button>Seleccionar</button>")}else{$(e).addClass("seleccionado");$(e).html("<button>Seleccionado</button>")}},encontrarRangos:function(e){presupuesto.rangos=[];$(e).find(".rango").each(function(){presupuesto.rangos.push($(this).attr("data-rango"))})},agregarItem:function(e){var t=$(e).hasClass("seleccionado"),n=1,r=$(e).siblings("p[data-equipos]").html(),i=$(e).siblings("p[data-precio]").html(),s={};s.cantidad=n;s.item=r;s.precio=i;var o=presupuesto.datosFiesta.tipoFiesta,u=presupuesto.slides[o][presupuesto.datosFiesta.slideActual],a=false;if(presupuesto.items[u]instanceof Array){for(var f=0;f<presupuesto.items[u].length;f++){var l=presupuesto.items[u][f];if(l.item===s.item&&!t){presupuesto.items[u].splice(f,1);a=true;break}else if(l.item===s.item){a=true;break}}if(presupuesto.items[u].length===0){presupuesto.items.splice(7,1)}else{if(!a){presupuesto.items[u].push(s)}}}else{presupuesto.items[u]=[s]}},removerVideos:function(){$("#presupuesto_14").find("iframe").remove();$("#presupuesto_14").find("figure").html("&#9658;")},exit:function(){this.removerVideos()},reset:function(){$("#presupuesto_14 .grupo-seleccionar").removeClass("seleccionado").html("<button>Seleccionar</button>");presupuesto.ocultarNavegacion("14")}};var presupuesto_15={init:function(){var e=this;$("#presupuesto_15 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_15 [data-si]").fadeTo("slow",1);$("#presupuesto_15 [data-no]").fadeTo("slow",.3)});$("#presupuesto_15 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_15 [data-no]").fadeTo("slow",1);$("#presupuesto_15 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){$("#presupuesto_15_opcion_no").slideUp();$("#presupuesto_15_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_15 .rango[data-rango="'+e+'"]').slideDown();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_15_opcion_si").slideUp();$("#presupuesto_15 .rango").slideUp();$("#presupuesto_15_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_15 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_15 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_15_opcion_no").hide();$("#presupuesto_15_opcion_si").hide();$("#presupuesto_15 .rango").hide();presupuesto.ocultarNavegacion("15")}};var presupuesto_16={init:function(){var e=this;$("#presupuesto_16 [data-si]").off("click").on("click",function(){e.opcionSi();$("#presupuesto_16 [data-si]").fadeTo("slow",1);$("#presupuesto_16 [data-no]").fadeTo("slow",.3)});$("#presupuesto_16 [data-no]").off("click").on("click",function(){e.opcionNo();$("#presupuesto_16 [data-no]").fadeTo("slow",1);$("#presupuesto_16 [data-si]").fadeTo("slow",.3)})},opcionSi:function(){$("#presupuesto_16_opcion_no").slideUp();$("#presupuesto_16_opcion_si").slideDown();var e=presupuesto.encontrarRango();$('#presupuesto_16 .rango[data-rango="'+e+'"]').slideDown();presupuesto.mostrarNavegacion();presupuesto.agregarItem(e,true)},opcionNo:function(){$("#presupuesto_16_opcion_si").slideUp();$("#presupuesto_16 .rango").slideUp();$("#presupuesto_16_opcion_no").slideDown();presupuesto.mostrarNavegacion()},reset:function(){$("#presupuesto_16 [data-si]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_16 [data-no]").css("opacity",1).find("input").prop("checked",false);$("#presupuesto_16_opcion_no").hide();$("#presupuesto_16_opcion_si").hide();$("#presupuesto_16 .rango").hide();presupuesto.ocultarNavegacion("16")}};var presupuesto_17={init:function(){$(".datepicker").datepicker();$.datepicker.regional["es"]={closeText:"Cerrar",prevText:"<Ant",nextText:"Sig>",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.setDefaults($.datepicker.regional["es"]);$("#presupuesto_17 span[data-volver]").off("click").on("click",function(){presupuesto.cambiarSlide(1)});var e=$("#"+presupuesto.datosFiesta.tipoFiesta+" h3[data-evento]").html();$("#presupuesto_17 span[data-evento]").html(e);$("#presupuesto_17 span[data-personas]").html(presupuesto.datosFiesta.personas);var t=0;$("#presupuesto_17 table tbody tr").remove();for(var n=0;n<presupuesto.items.length;n++){var r=presupuesto.items[n];if(r!==undefined){for(var i=0;i<r.length;i++){var s=r[i];var o=$.trim(s.item[0]).toUpperCase()+s.item.slice(1);$("#presupuesto_17 table tbody").append('<tr><td class="centro">'+s.cantidad+"</td><td>"+o+'</td><td class="derecha">'+s.precio+"</td></tr>");var u=s.precio.replace("$","");u=parseInt(u.replace(".",""),10);t=t+u;$("#presupuesto_17 td[data-total]").html("$"+t.formatMoney(0))}}}this.montoMinimo(t);this.loadEvent()},montoMinimo:function(e){var t=presupuesto.minimos[presupuesto.datosFiesta.tipoFiesta];if(e<t){$("#presupuesto_17").find(".monto-minimo").show().find("[data-monto-minimo]").html(t.formatMoney(0))}},loadEvent:function(){$("#presupuesto_17").find('input[type="submit"]').one("click",function(){return presupuesto_final.email()})}};var presupuesto_final={email:function(){var e=$.trim($("#form-nombre").val()),t=$.trim($("#form-email").val()),n=$.trim($("#form-telefono").val()),r=$.trim($("#form-fecha").val()),i=$.trim($("#form-lugar").val()),s=$.trim($("#form-mensaje").val()),o=$.trim($("#presupuesto_17 span[data-personas]").html()),u=$.trim($("#presupuesto_17 span[data-evento]").html()),a=$("#presupuesto_17 td[data-total]").html(),f=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,l=presupuesto.mensaje_3,c=[];if(e===""){c.push("Debes ingresar un nombre")}if(t===""){c.push("Debes ingresar un e-mail")}else{if(!f.test(t)){c.push("El e-mail ingresado es inválido")}}if(c.length>0){var h="<ul>";for(var p=0;p<c.length;p++){h=h+"<li>"+c[p]+"</li>"}h=h+"</ul><button>Aceptar</button>";presupuesto.modal(h);$("#modal").find("button:eq(0)").one("click",function(){$.magnificPopup.close()});presupuesto_17.loadEvent()}else{$("#presupuesto_17 form").css("opacity",.5);$('#presupuesto_17 input[type="submit"]').val("Enviando...").css("opacity",1);$("#presupuesto_17 input").attr("disabled","disabled");$("#presupuesto_17 div.anterior button").off("click").on("click",function(){return false});var d="";for(var p=0;p<presupuesto.items.length;p++){var v=presupuesto.items[p];if(v!==undefined){for(var m=0;m<v.length;m++){var g=v[m];var y=$.trim(g.item[0]).toUpperCase()+g.item.slice(1);d=d+"/"+g.cantidad+"::"+y+"::"+g.precio}}}d=d.substring(1);presupuesto.enviado=true;$.post("presupuestos.php",{nombre:e,email:t,telefono:n,fecha:r,lugar:i,mensaje:s,evento:u,personas:o,total:a,items:d,mensaje_3:l},function(e){if(e==1){$("#presupuesto_17").fadeOut(function(){$("#presupuesto_enviado").fadeIn()})}else{presupuesto.enviado=false;presupuesto.modal('<p>¡UPS!. No pudimos enviar el formulario, por favor inténtalo nuevamente. Si el error persiste, toma contacto con nosotros a <a href="mailtto: contacto@jzmusic.cl">contacto@jzmusic.cl</a>.</p> <button>Aceptar</button>');$("#modal").find("button:eq(0)").one("click",function(){$.magnificPopup.close()});$("#presupuesto_17 form").css("opacity",1);$('#presupuesto_17 input[type="submit"]').val("Enviar");$("#presupuesto_17 input").removeAttr("disabled");$("#presupuesto_17 div.anterior button").off("click").one("click",function(e){e.preventDefault();document.location.hash="/presupuesto/"+that.slides[tipoFiesta][slideActual-1]});presupuesto_17.loadEvent()}})}return false}};Path.root("#/presupuesto/1");Path.map("#/presupuesto/:slide").to(function(){if(!presupuesto.enviado){var e=parseInt(this.params["slide"],10);if(!isNaN(e)&&e>0&&e<18){var t=presupuesto.datosFiesta.slideActual,n=presupuesto.datosFiesta.tipoFiesta;if(e>1&&n!==""){if($.inArray(e,presupuesto.slides[n])>-1){if($.inArray(e,presupuesto.historiaSlides)>-1){presupuesto.cambiarSlide(e)}else{var r=presupuesto.slides[n][t+1];if(r==e){presupuesto.cambiarSlide(e);presupuesto.historiaSlides.push(e)}else{document.location.hash="/presupuesto/"+presupuesto.slides[n][t]}}}else{document.location.hash="/presupuesto/"+presupuesto.slides[n][t]}}else{presupuesto.cambiarSlide(1);document.location.hash="/presupuesto/1"}}else{document.location.hash="/presupuesto/1"}}});$(function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t);presupuesto.init();Path.listen()})
